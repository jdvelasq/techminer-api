<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>techminer2.scientopy.bar &mdash; TechMiner2 0.1.0 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/clipboard.min.js"></script>
        <script src="../../../_static/copybutton.js"></script>
        <script src="../../../_static/toggleprompt.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            TechMiner2
          </a>
              <div class="version">
                0.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/release_info.html">Release Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/license.html">MIT License</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software comparison</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../techminer/__index__.html">TechMiner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bibliometrix/__index__.html">Bibliometrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../vantagepoint/__index__.html">VantagePoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tlab/__index__.html">T-LAB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scientopy/__index__.html">ScientoPy</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">TechMiner2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">techminer2.scientopy.bar</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for techminer2.scientopy.bar</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Bar</span>
<span class="sd">===============================================================================</span>






<span class="sd">**Basic Usage.**</span>

<span class="sd">&gt;&gt;&gt; from techminer2 import scientopy</span>
<span class="sd">&gt;&gt;&gt; directory = &quot;data/regtech/&quot;</span>

<span class="sd">&gt;&gt;&gt; file_name = &quot;sphinx/_static/scientopy__bar-1.html&quot;</span>
<span class="sd">&gt;&gt;&gt; r = scientopy.bar(</span>
<span class="sd">...    criterion=&#39;author_keywords&#39;,</span>
<span class="sd">...    directory=directory,</span>
<span class="sd">... )</span>
<span class="sd">&gt;&gt;&gt; r.plot_.write_html(file_name)</span>

<span class="sd">.. raw:: html</span>

<span class="sd">    &lt;iframe src=&quot;../_static/scientopy__bar-1.html&quot; height=&quot;600px&quot; width=&quot;100%&quot; frameBorder=&quot;0&quot;&gt;&lt;/iframe&gt;</span>

<span class="sd">&gt;&gt;&gt; print(r.table_.head().to_markdown())</span>
<span class="sd">| author_keywords       |   OCC |   average_growth_rate |</span>
<span class="sd">|:----------------------|------:|----------------------:|</span>
<span class="sd">| regtech               |    28 |                  -0.5 |</span>
<span class="sd">| fintech               |    12 |                  -0.5 |</span>
<span class="sd">| regulatory technology |     7 |                  -1.5 |</span>
<span class="sd">| compliance            |     7 |                   0   |</span>
<span class="sd">| regulation            |     5 |                  -0.5 |</span>



<span class="sd">&gt;&gt;&gt; print(r.prompt_)</span>
<span class="sd">&lt;BLANKLINE&gt;</span>
<span class="sd">Imagine that you are a researcher analyzing a bibliographic dataset. The table below provides data on top most frequent 20 author_keywords in the dataset. The column &#39;OCC&#39; indicates the number of documents in which each item in the column &#39;author_keywords&#39; appears. The column &#39;average growth rate&#39; in the table, is obtained by comparing the number of documents published Before 2022 with the number of documents published Between 2022-2023. Use the information in the table to draw conclusions about the impact and relevance of the reseach published by the authors in the dataset. In your analysis, be sure to describe in a clear and concise way, any findings or any patterns you observe, and identify any outliers or anomalies in the data. Limit your description to one paragraph with no more than 250 words.</span>
<span class="sd">&lt;BLANKLINE&gt;</span>
<span class="sd">| author_keywords         |   OCC |   average_growth_rate |</span>
<span class="sd">|:------------------------|------:|----------------------:|</span>
<span class="sd">| regtech                 |    28 |                  -0.5 |</span>
<span class="sd">| fintech                 |    12 |                  -0.5 |</span>
<span class="sd">| regulatory technology   |     7 |                  -1.5 |</span>
<span class="sd">| compliance              |     7 |                   0   |</span>
<span class="sd">| regulation              |     5 |                  -0.5 |</span>
<span class="sd">| financial services      |     4 |                 nan   |</span>
<span class="sd">| financial regulation    |     4 |                 nan   |</span>
<span class="sd">| artificial intelligence |     4 |                 nan   |</span>
<span class="sd">| anti-money laundering   |     3 |                  -1   |</span>
<span class="sd">| risk management         |     3 |                 nan   |</span>
<span class="sd">| innovation              |     3 |                  -0.5 |</span>
<span class="sd">| blockchain              |     3 |                  -0.5 |</span>
<span class="sd">| suptech                 |     3 |                 nan   |</span>
<span class="sd">| semantic technologies   |     2 |                 nan   |</span>
<span class="sd">| data protection         |     2 |                 nan   |</span>
<span class="sd">| smart contracts         |     2 |                 nan   |</span>
<span class="sd">| charitytech             |     2 |                 nan   |</span>
<span class="sd">| english law             |     2 |                 nan   |</span>
<span class="sd">| gdpr                    |     2 |                  -0.5 |</span>
<span class="sd">| data protection officer |     2 |                  -0.5 |</span>
<span class="sd">&lt;BLANKLINE&gt;</span>
<span class="sd">&lt;BLANKLINE&gt;</span>



<span class="sd">**Time Filter.**</span>

<span class="sd">&gt;&gt;&gt; file_name = &quot;sphinx/_static/scientopy__bar-3.html&quot;</span>
<span class="sd">&gt;&gt;&gt; r = scientopy.bar(</span>
<span class="sd">...     criterion=&#39;author_keywords&#39;,</span>
<span class="sd">...     start_year=2018,</span>
<span class="sd">...     end_year=2021,</span>
<span class="sd">...     directory=directory,</span>
<span class="sd">... )</span>
<span class="sd">&gt;&gt;&gt; r.plot_.write_html(file_name)</span>

<span class="sd">.. raw:: html</span>

<span class="sd">    &lt;iframe src=&quot;../_static/scientopy__bar-3.html&quot; height=&quot;600px&quot; width=&quot;100%&quot; frameBorder=&quot;0&quot;&gt;&lt;/iframe&gt;</span>


<span class="sd">&gt;&gt;&gt; print(r.table_.head().to_markdown())    </span>
<span class="sd">| author_keywords       |   OCC |   average_growth_rate |</span>
<span class="sd">|:----------------------|------:|----------------------:|</span>
<span class="sd">| regtech               |    18 |                  -0.5 |</span>
<span class="sd">| fintech               |    10 |                  -1.5 |</span>
<span class="sd">| regulatory technology |     5 |                   1.5 |</span>
<span class="sd">| compliance            |     5 |                   0   |</span>
<span class="sd">| regulation            |     4 |                   0.5 |</span>



<span class="sd">**Custom Topics Extraction.**</span>

<span class="sd">&gt;&gt;&gt; file_name = &quot;sphinx/_static/scientopy__bar-4.html&quot;</span>
<span class="sd">&gt;&gt;&gt; r = scientopy.bar(</span>
<span class="sd">...     criterion=&#39;author_keywords&#39;,</span>
<span class="sd">...     custom_topics=[</span>
<span class="sd">...         &quot;fintech&quot;, </span>
<span class="sd">...         &quot;blockchain&quot;, </span>
<span class="sd">...         &quot;financial regulation&quot;, </span>
<span class="sd">...         &quot;machine learning&quot;,</span>
<span class="sd">...         &quot;big data&quot;,</span>
<span class="sd">...         &quot;cryptocurrency&quot;,</span>
<span class="sd">...     ],</span>
<span class="sd">...     directory=directory,</span>
<span class="sd">... )</span>
<span class="sd">&gt;&gt;&gt; r.plot_.write_html(file_name)</span>

<span class="sd">.. raw:: html</span>

<span class="sd">    &lt;iframe src=&quot;../_static/scientopy__bar-4.html&quot; height=&quot;600px&quot; width=&quot;100%&quot; frameBorder=&quot;0&quot;&gt;&lt;/iframe&gt;</span>


<span class="sd">&gt;&gt;&gt; print(r.table_.head().to_markdown()) </span>
<span class="sd">| author_keywords      |   OCC |   average_growth_rate |</span>
<span class="sd">|:---------------------|------:|----------------------:|</span>
<span class="sd">| fintech              |    12 |                  -0.5 |</span>
<span class="sd">| financial regulation |     4 |                 nan   |</span>
<span class="sd">| blockchain           |     3 |                  -0.5 |</span>
<span class="sd">| machine learning     |     1 |                 nan   |</span>
<span class="sd">| big data             |     1 |                 nan   |</span>


<span class="sd">**Filters.**</span>

<span class="sd">&gt;&gt;&gt; file_name = &quot;sphinx/_static/scientopy__bar-5.html&quot;</span>
<span class="sd">&gt;&gt;&gt; r = scientopy.bar(</span>
<span class="sd">...     criterion=&#39;countries&#39;,</span>
<span class="sd">...     directory=directory,</span>
<span class="sd">... )</span>
<span class="sd">&gt;&gt;&gt; r.plot_.write_html(file_name)</span>

<span class="sd">.. raw:: html</span>

<span class="sd">    &lt;iframe src=&quot;../_static/scientopy__bar-5.html&quot; height=&quot;600px&quot; width=&quot;100%&quot; frameBorder=&quot;0&quot;&gt;&lt;/iframe&gt;</span>


<span class="sd">&gt;&gt;&gt; print(r.table_.head().to_markdown())    </span>
<span class="sd">| countries      |   OCC |   average_growth_rate |</span>
<span class="sd">|:---------------|------:|----------------------:|</span>
<span class="sd">| Australia      |     7 |                  -1   |</span>
<span class="sd">| United Kingdom |     7 |                 nan   |</span>
<span class="sd">| United States  |     6 |                   0.5 |</span>
<span class="sd">| Ireland        |     5 |                  -0.5 |</span>
<span class="sd">| China          |     5 |                   0.5 |</span>


<span class="sd">&gt;&gt;&gt; file_name = &quot;sphinx/_static/scientopy__bar-6.html&quot;</span>
<span class="sd">&gt;&gt;&gt; r = scientopy.bar(</span>
<span class="sd">...     criterion=&#39;countries&#39;,</span>
<span class="sd">...     directory=directory,</span>
<span class="sd">...     countries=[&#39;Australia&#39;, &#39;United Kingdom&#39;, &#39;United States&#39;],</span>
<span class="sd">... )</span>
<span class="sd">&gt;&gt;&gt; r.plot_.write_html(file_name)</span>


<span class="sd">.. raw:: html</span>

<span class="sd">    &lt;iframe src=&quot;../_static/scientopy__bar-6.html&quot; height=&quot;600px&quot; width=&quot;100%&quot; frameBorder=&quot;0&quot;&gt;&lt;/iframe&gt;</span>

<span class="sd">    </span>
<span class="sd">&gt;&gt;&gt; print(r.table_.head().to_markdown()) </span>
<span class="sd">| countries      |   OCC |   average_growth_rate |</span>
<span class="sd">|:---------------|------:|----------------------:|</span>
<span class="sd">| Australia      |     7 |                  -1   |</span>
<span class="sd">| United Kingdom |     7 |                 nan   |</span>
<span class="sd">| United States  |     6 |                   0.5 |</span>
<span class="sd">| Hong Kong      |     3 |                 nan   |</span>
<span class="sd">| Switzerland    |     3 |                   0.5 |</span>


<span class="sd">&gt;&gt;&gt; file_name = &quot;sphinx/_static/scientopy__bar-7.html&quot;</span>
<span class="sd">&gt;&gt;&gt; r = scientopy.bar(</span>
<span class="sd">...     criterion=&#39;author_keywords&#39;,</span>
<span class="sd">...     directory=directory,</span>
<span class="sd">...     topics_length=5,</span>
<span class="sd">...     trend_analysis=True,</span>
<span class="sd">...     start_year=2018,</span>
<span class="sd">...     end_year=2021,</span>
<span class="sd">... )</span>
<span class="sd">&gt;&gt;&gt; r.plot_.write_html(file_name)</span>

<span class="sd">.. raw:: html</span>

<span class="sd">    &lt;iframe src=&quot;../_static/scientopy__bar-7.html&quot; height=&quot;600px&quot; width=&quot;100%&quot; frameBorder=&quot;0&quot;&gt;&lt;/iframe&gt;</span>

<span class="sd">    </span>
<span class="sd">&gt;&gt;&gt; print(r.table_.head().to_markdown()) </span>
<span class="sd">| author_keywords       |   OCC |   average_growth_rate |</span>
<span class="sd">|:----------------------|------:|----------------------:|</span>
<span class="sd">| regulatory technology |     5 |                   1.5 |</span>
<span class="sd">| regulation            |     4 |                   0.5 |</span>
<span class="sd">| anti-money laundering |     3 |                   1   |</span>
<span class="sd">| accountability        |     2 |                   0.5 |</span>
<span class="sd">| gdpr                  |     2 |                   0.5 |</span>

<span class="sd">&gt;&gt;&gt; print(r.prompt_)</span>
<span class="sd">&lt;BLANKLINE&gt;</span>
<span class="sd">Imagine that you are a researcher analyzing a bibliographic dataset. The table below provides data on top 5 &#39;author_keywords&#39; with the highest average growth rate in the dataset, obtained by comparing the number of documents published Before 2020 with the number of documents published Between 2020-2021. The column &#39;OCC&#39; indicates the number of documents in which each item of the &#39;author_keywords&#39; appears. Use the information in the table to draw conclusions about the number of occurrences of each item in &#39;author_keywords&#39; appears. In your analysis, be sure to describe in a clear and concise way, any findings or any patterns you observe, and identify any outliers or anomalies in the data. Limit your description to one paragraph with no more than 250 words.</span>
<span class="sd">&lt;BLANKLINE&gt;</span>
<span class="sd">| author_keywords       |   OCC |   average_growth_rate |</span>
<span class="sd">|:----------------------|------:|----------------------:|</span>
<span class="sd">| regulatory technology |     5 |                   1.5 |</span>
<span class="sd">| regulation            |     4 |                   0.5 |</span>
<span class="sd">| anti-money laundering |     3 |                   1   |</span>
<span class="sd">| accountability        |     2 |                   0.5 |</span>
<span class="sd">| gdpr                  |     2 |                   0.5 |</span>
<span class="sd">&lt;BLANKLINE&gt;</span>
<span class="sd">&lt;BLANKLINE&gt;</span>



<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>

<span class="kn">from</span> <span class="nn">.._plots.bar_plot</span> <span class="kn">import</span> <span class="n">bar_plot</span>
<span class="kn">from</span> <span class="nn">..techminer.indicators.growth_indicators_by_topic</span> <span class="kn">import</span> <span class="n">growth_indicators_by_topic</span>


<span class="nd">@dataclass</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">_Results</span><span class="p">:</span>
    <span class="n">plot_</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">table_</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">prompt_</span> <span class="o">=</span> <span class="kc">None</span>


<div class="viewcode-block" id="bar"><a class="viewcode-back" href="../../../scientopy/bar.html#techminer2.scientopy.bar.bar">[docs]</a><span class="k">def</span> <span class="nf">bar</span><span class="p">(</span>
    <span class="n">criterion</span><span class="p">,</span>
    <span class="n">time_window</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">topics_length</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
    <span class="n">custom_topics</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">trend_analysis</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">directory</span><span class="o">=</span><span class="s2">&quot;./&quot;</span><span class="p">,</span>
    <span class="n">database</span><span class="o">=</span><span class="s2">&quot;documents&quot;</span><span class="p">,</span>
    <span class="n">start_year</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">end_year</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">filters</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ScientoPy Bar Plot.&quot;&quot;&quot;</span>

    <span class="n">growth_indicators</span> <span class="o">=</span> <span class="n">growth_indicators_by_topic</span><span class="p">(</span>
        <span class="n">criterion</span><span class="o">=</span><span class="n">criterion</span><span class="p">,</span>
        <span class="n">time_window</span><span class="o">=</span><span class="n">time_window</span><span class="p">,</span>
        <span class="n">directory</span><span class="o">=</span><span class="n">directory</span><span class="p">,</span>
        <span class="n">database</span><span class="o">=</span><span class="n">database</span><span class="p">,</span>
        <span class="n">start_year</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span>
        <span class="n">end_year</span><span class="o">=</span><span class="n">end_year</span><span class="p">,</span>
        <span class="o">**</span><span class="n">filters</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">trend_analysis</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">growth_indicators</span> <span class="o">=</span> <span class="n">growth_indicators</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span>
            <span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;average_growth_rate&quot;</span><span class="p">,</span> <span class="s2">&quot;OCC&quot;</span><span class="p">,</span> <span class="s2">&quot;global_citations&quot;</span><span class="p">],</span>
            <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">growth_indicators</span> <span class="o">=</span> <span class="n">growth_indicators</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span>
            <span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;OCC&quot;</span><span class="p">,</span> <span class="s2">&quot;global_citations&quot;</span><span class="p">,</span> <span class="s2">&quot;average_growth_rate&quot;</span><span class="p">],</span>
            <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
        <span class="p">)</span>

    <span class="n">growth_indicators</span> <span class="o">=</span> <span class="n">_filter_indicators_by_custom_topics</span><span class="p">(</span>
        <span class="n">indicators</span><span class="o">=</span><span class="n">growth_indicators</span><span class="p">,</span>
        <span class="n">topics_length</span><span class="o">=</span><span class="n">topics_length</span><span class="p">,</span>
        <span class="n">custom_topics</span><span class="o">=</span><span class="n">custom_topics</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">growth_indicators</span> <span class="o">=</span> <span class="n">growth_indicators</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span>
        <span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;OCC&quot;</span><span class="p">,</span> <span class="s2">&quot;global_citations&quot;</span><span class="p">,</span> <span class="s2">&quot;average_growth_rate&quot;</span><span class="p">],</span>
        <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
    <span class="p">)</span>

    <span class="n">col0</span> <span class="o">=</span> <span class="n">growth_indicators</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">col1</span> <span class="o">=</span> <span class="n">growth_indicators</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="n">obj</span> <span class="o">=</span> <span class="n">_Results</span><span class="p">()</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">plot_</span> <span class="o">=</span> <span class="n">bar_plot</span><span class="p">(</span><span class="n">dataframe</span><span class="o">=</span><span class="n">growth_indicators</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;OCC&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">table_</span> <span class="o">=</span> <span class="n">growth_indicators</span><span class="p">[[</span><span class="s2">&quot;OCC&quot;</span><span class="p">,</span> <span class="s2">&quot;average_growth_rate&quot;</span><span class="p">]]</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">prompt_</span> <span class="o">=</span> <span class="n">_create_prompt</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">table_</span><span class="p">,</span> <span class="n">criterion</span><span class="p">,</span> <span class="n">trend_analysis</span><span class="p">,</span> <span class="n">col0</span><span class="p">,</span> <span class="n">col1</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">obj</span></div>


<span class="k">def</span> <span class="nf">_create_prompt</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">criterion</span><span class="p">,</span> <span class="n">trend_analysis</span><span class="p">,</span> <span class="n">col0</span><span class="p">,</span> <span class="n">col1</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">trend_analysis</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">Imagine that you are a researcher analyzing a bibliographic dataset. </span><span class="se">\</span>
<span class="s2">The table below provides data on top </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">criterion</span><span class="si">}</span><span class="s2">&#39; </span><span class="se">\</span>
<span class="s2">with the highest average growth rate in the dataset, obtained by </span><span class="se">\</span>
<span class="s2">comparing the number of documents published </span><span class="si">{</span><span class="n">col0</span><span class="si">}</span><span class="s2"> </span><span class="se">\</span>
<span class="s2">with the number of documents published </span><span class="si">{</span><span class="n">col1</span><span class="si">}</span><span class="s2">. </span><span class="se">\</span>
<span class="s2">The column &#39;OCC&#39; indicates the number of documents in which each item of </span><span class="se">\</span>
<span class="s2">the &#39;</span><span class="si">{</span><span class="n">criterion</span><span class="si">}</span><span class="s2">&#39; appears. </span><span class="se">\</span>
<span class="s2">Use the information in the table to draw conclusions about the number of occurrences </span><span class="se">\</span>
<span class="s2">of each item in &#39;</span><span class="si">{</span><span class="n">criterion</span><span class="si">}</span><span class="s2">&#39; appears. </span><span class="se">\</span>
<span class="s2">In your analysis, be sure to describe in a clear and concise way, any </span><span class="se">\</span>
<span class="s2">findings or any patterns you observe, and identify any outliers or anomalies in the data. </span><span class="se">\</span>
<span class="s2">Limit your description to one paragraph with no more than 250 words.</span>

<span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="n">to_markdown</span><span class="p">()</span><span class="si">}</span>

<span class="s2">&quot;&quot;&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">Imagine that you are a researcher analyzing a bibliographic dataset. </span><span class="se">\</span>
<span class="s2">The table below provides data on top most frequent </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">criterion</span><span class="si">}</span><span class="s2"> in the dataset. </span><span class="se">\</span>
<span class="s2">The column &#39;OCC&#39; indicates the number of documents in which each item in the column &#39;</span><span class="si">{</span><span class="n">criterion</span><span class="si">}</span><span class="s2">&#39; appears. </span><span class="se">\</span>
<span class="s2">The column &#39;average growth rate&#39; in the table, is obtained by </span><span class="se">\</span>
<span class="s2">comparing the number of documents published </span><span class="si">{</span><span class="n">col0</span><span class="si">}</span><span class="s2"> </span><span class="se">\</span>
<span class="s2">with the number of documents published </span><span class="si">{</span><span class="n">col1</span><span class="si">}</span><span class="s2">. </span><span class="se">\</span>
<span class="s2">Use the information in the table to draw conclusions about the impact and relevance of </span><span class="se">\</span>
<span class="s2">the reseach published by the authors in the dataset. In your analysis, be sure </span><span class="se">\</span>
<span class="s2">to describe in a clear and concise way, any findings or any patterns you </span><span class="se">\</span>
<span class="s2">observe, and identify any outliers or anomalies in the data. </span><span class="se">\</span>
<span class="s2">Limit your description to one paragraph with no more than 250 words.</span>

<span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="n">to_markdown</span><span class="p">()</span><span class="si">}</span>

<span class="s2">&quot;&quot;&quot;</span>


<span class="k">def</span> <span class="nf">_filter_indicators_by_custom_topics</span><span class="p">(</span><span class="n">indicators</span><span class="p">,</span> <span class="n">topics_length</span><span class="p">,</span> <span class="n">custom_topics</span><span class="p">):</span>
    <span class="c1"># Copy the indicators dataframe to avoid mutating the original dataframe.</span>
    <span class="n">indicators_copy</span> <span class="o">=</span> <span class="n">indicators</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="c1"># If custom topics are provided, only keep indicators that are in the custom</span>
    <span class="c1"># topics list.</span>
    <span class="k">if</span> <span class="n">custom_topics</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">custom_topics</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">topic</span> <span class="k">for</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">custom_topics</span> <span class="k">if</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">indicators</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="p">]</span>
    <span class="c1"># If no custom topics are provided, keep the first n rows of the indicators</span>
    <span class="c1"># dataframe, where n is the number of topics.</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">custom_topics</span> <span class="o">=</span> <span class="n">indicators</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">custom_topics</span> <span class="o">=</span> <span class="n">custom_topics</span><span class="p">[:</span><span class="n">topics_length</span><span class="p">]</span>

    <span class="c1"># Filter the indicators dataframe by the custom topics.</span>
    <span class="n">indicators_copy</span> <span class="o">=</span> <span class="n">indicators_copy</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">custom_topics</span><span class="p">,</span> <span class="p">:]</span>

    <span class="k">return</span> <span class="n">indicators_copy</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>