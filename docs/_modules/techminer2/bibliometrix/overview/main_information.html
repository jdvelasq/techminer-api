<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>techminer2.bibliometrix.overview.main_information &mdash; TechMiner2 0.1.0 documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/copybutton.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/clipboard.min.js"></script>
        <script src="../../../../_static/copybutton.js"></script>
        <script src="../../../../_static/toggleprompt.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            TechMiner2
          </a>
              <div class="version">
                0.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction/release_info.html">Release Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction/license.html">MIT License</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software comparison</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../techminer/__index__.html">TechMiner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../bibliometrix/__index__.html">Bibliometrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../vantagepoint/__index__.html">VantagePoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tlab/__index__.html">T-LAB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../scientopy/__index__.html">ScientoPy</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">TechMiner2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">techminer2.bibliometrix.overview.main_information</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for techminer2.bibliometrix.overview.main_information</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Main information</span>
<span class="sd">===============================================================================</span>


<span class="sd">&gt;&gt;&gt; directory = &quot;data/regtech/&quot;</span>

<span class="sd">&gt;&gt;&gt; from techminer2 import bibliometrix</span>
<span class="sd">&gt;&gt;&gt; r = bibliometrix.overview.main_information(directory)</span>
<span class="sd">&gt;&gt;&gt; r.table_</span>
<span class="sd">                                                            Value</span>
<span class="sd">Category       Item                                              </span>
<span class="sd">GENERAL        Timespan                                 2016:2023</span>
<span class="sd">               Documents                                       52</span>
<span class="sd">               Annual growth rate %                         63.87</span>
<span class="sd">               Document average age                          2.77</span>
<span class="sd">               References                                    2968</span>
<span class="sd">               Average citations per document               10.83</span>
<span class="sd">               Average citations per document per year       1.35</span>
<span class="sd">               Average references per document              59.36</span>
<span class="sd">               Sources                                         46</span>
<span class="sd">               Average documents per source                  1.13</span>
<span class="sd">DOCUMENT TYPES article                                         31</span>
<span class="sd">               book                                             1</span>
<span class="sd">               book_chapter                                     9</span>
<span class="sd">               conference_paper                                11</span>
<span class="sd">AUTHORS        Authors                                      102.0</span>
<span class="sd">               Authors of single-authored documents          19.0</span>
<span class="sd">               Single-authored documents                     19.0</span>
<span class="sd">               Multi-authored documents                      33.0</span>
<span class="sd">               Authors per document                          2.29</span>
<span class="sd">               Co-authors per document                       3.03</span>
<span class="sd">               International co-authorship %                23.08</span>
<span class="sd">               Author appearances                           119.0</span>
<span class="sd">               Documents per author                          0.44</span>
<span class="sd">               Collaboration index                            1.0</span>
<span class="sd">               Organizations                                 80.0</span>
<span class="sd">               Organizations (1st author)                    44.0</span>
<span class="sd">               Countries                                     29.0</span>
<span class="sd">               Countries (1st author)                        25.0</span>
<span class="sd">KEYWORDS       Raw author keywords                            149</span>
<span class="sd">               Cleaned author keywords                        144</span>
<span class="sd">               Raw index keywords                             155</span>
<span class="sd">               Cleaned index keywords                         150</span>


<span class="sd">            </span>
<span class="sd">               </span>
<span class="sd">&gt;&gt;&gt; file_name = &quot;sphinx/_static/bibliometrix__main_info_plot.html&quot;               </span>
<span class="sd">&gt;&gt;&gt; r.plot_.write_html(file_name)</span>

<span class="sd">.. raw:: html</span>

<span class="sd">    &lt;iframe src=&quot;../../_static/bibliometrix__main_info_plot.html&quot; height=&quot;600px&quot; width=&quot;100%&quot; frameBorder=&quot;0&quot;&gt;&lt;/iframe&gt;</span>


<span class="sd">    </span>
<span class="sd">&gt;&gt;&gt; print(r.prompt_)</span>
<span class="sd">&lt;BLANKLINE&gt;</span>
<span class="sd">Imagine that you are a researcher analyzing a bibliographic dataset. The table below provides data on the main characteristics of the dataset. Use the the information in the table to draw conclusions. Limit your description to one paragraph with no more than 250 words.</span>
<span class="sd">&lt;BLANKLINE&gt;</span>
<span class="sd">|                                                        | Value     |</span>
<span class="sd">|:-------------------------------------------------------|:----------|</span>
<span class="sd">| (&#39;GENERAL&#39;, &#39;Timespan&#39;)                                | 2016:2023 |</span>
<span class="sd">| (&#39;GENERAL&#39;, &#39;Documents&#39;)                               | 52        |</span>
<span class="sd">| (&#39;GENERAL&#39;, &#39;Annual growth rate %&#39;)                    | 63.87     |</span>
<span class="sd">| (&#39;GENERAL&#39;, &#39;Document average age&#39;)                    | 2.77      |</span>
<span class="sd">| (&#39;GENERAL&#39;, &#39;References&#39;)                              | 2968      |</span>
<span class="sd">| (&#39;GENERAL&#39;, &#39;Average citations per document&#39;)          | 10.83     |</span>
<span class="sd">| (&#39;GENERAL&#39;, &#39;Average citations per document per year&#39;) | 1.35      |</span>
<span class="sd">| (&#39;GENERAL&#39;, &#39;Average references per document&#39;)         | 59.36     |</span>
<span class="sd">| (&#39;GENERAL&#39;, &#39;Sources&#39;)                                 | 46        |</span>
<span class="sd">| (&#39;GENERAL&#39;, &#39;Average documents per source&#39;)            | 1.13      |</span>
<span class="sd">| (&#39;DOCUMENT TYPES&#39;, &#39;article&#39;)                          | 31        |</span>
<span class="sd">| (&#39;DOCUMENT TYPES&#39;, &#39;book&#39;)                             | 1         |</span>
<span class="sd">| (&#39;DOCUMENT TYPES&#39;, &#39;book_chapter&#39;)                     | 9         |</span>
<span class="sd">| (&#39;DOCUMENT TYPES&#39;, &#39;conference_paper&#39;)                 | 11        |</span>
<span class="sd">| (&#39;AUTHORS&#39;, &#39;Authors&#39;)                                 | 102.0     |</span>
<span class="sd">| (&#39;AUTHORS&#39;, &#39;Authors of single-authored documents&#39;)    | 19.0      |</span>
<span class="sd">| (&#39;AUTHORS&#39;, &#39;Single-authored documents&#39;)               | 19.0      |</span>
<span class="sd">| (&#39;AUTHORS&#39;, &#39;Multi-authored documents&#39;)                | 33.0      |</span>
<span class="sd">| (&#39;AUTHORS&#39;, &#39;Authors per document&#39;)                    | 2.29      |</span>
<span class="sd">| (&#39;AUTHORS&#39;, &#39;Co-authors per document&#39;)                 | 3.03      |</span>
<span class="sd">| (&#39;AUTHORS&#39;, &#39;International co-authorship %&#39;)           | 23.08     |</span>
<span class="sd">| (&#39;AUTHORS&#39;, &#39;Author appearances&#39;)                      | 119.0     |</span>
<span class="sd">| (&#39;AUTHORS&#39;, &#39;Documents per author&#39;)                    | 0.44      |</span>
<span class="sd">| (&#39;AUTHORS&#39;, &#39;Collaboration index&#39;)                     | 1.0       |</span>
<span class="sd">| (&#39;AUTHORS&#39;, &#39;Organizations&#39;)                           | 80.0      |</span>
<span class="sd">| (&#39;AUTHORS&#39;, &#39;Organizations (1st author)&#39;)              | 44.0      |</span>
<span class="sd">| (&#39;AUTHORS&#39;, &#39;Countries&#39;)                               | 29.0      |</span>
<span class="sd">| (&#39;AUTHORS&#39;, &#39;Countries (1st author)&#39;)                  | 25.0      |</span>
<span class="sd">| (&#39;KEYWORDS&#39;, &#39;Raw author keywords&#39;)                    | 149       |</span>
<span class="sd">| (&#39;KEYWORDS&#39;, &#39;Cleaned author keywords&#39;)                | 144       |</span>
<span class="sd">| (&#39;KEYWORDS&#39;, &#39;Raw index keywords&#39;)                     | 155       |</span>
<span class="sd">| (&#39;KEYWORDS&#39;, &#39;Cleaned index keywords&#39;)                 | 150       |</span>
<span class="sd">&lt;BLANKLINE&gt;</span>
<span class="sd">&lt;BLANKLINE&gt;</span>


<span class="sd">    </span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">datetime</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">from</span> <span class="nn">..._read_records</span> <span class="kn">import</span> <span class="n">read_records</span>
<span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objects</span> <span class="k">as</span> <span class="nn">go</span>


<span class="k">class</span> <span class="nc">_MainInformation</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">directory</span><span class="p">,</span>
        <span class="n">database</span><span class="o">=</span><span class="s2">&quot;documents&quot;</span><span class="p">,</span>
        <span class="n">start_year</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">end_year</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">filters</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">directory</span> <span class="o">=</span> <span class="n">directory</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">records</span> <span class="o">=</span> <span class="n">read_records</span><span class="p">(</span>
            <span class="n">directory</span><span class="o">=</span><span class="n">directory</span><span class="p">,</span>
            <span class="n">database</span><span class="o">=</span><span class="n">database</span><span class="p">,</span>
            <span class="n">start_year</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span>
            <span class="n">end_year</span><span class="o">=</span><span class="n">end_year</span><span class="p">,</span>
            <span class="o">**</span><span class="n">filters</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_records</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compute_general_information_stats</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compute_document_types_stats</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compute_authors_stats</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compute_keywords_stats</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">make_report</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">make_report</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pdf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">general_information_stats</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">document_types_stats</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">authors_stats</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">keywords_stats</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_arrays</span><span class="p">(</span>
            <span class="p">[</span><span class="n">pdf</span><span class="o">.</span><span class="n">Category</span><span class="p">,</span> <span class="n">pdf</span><span class="o">.</span><span class="n">Item</span><span class="p">],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Category&quot;</span><span class="p">,</span> <span class="s2">&quot;Item&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">report_</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pdf</span><span class="o">.</span><span class="n">Value</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Value&quot;</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>

    <span class="c1">#####################################################################################</span>
    <span class="k">def</span> <span class="nf">compute_general_information_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">general_information_stats</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
            <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Category&quot;</span><span class="p">,</span> <span class="s2">&quot;Item&quot;</span><span class="p">,</span> <span class="s2">&quot;Value&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">general_information_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;GENERAL&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Timespan&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">compute_timespam</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">general_information_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;GENERAL&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Documents&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">documents</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">general_information_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;GENERAL&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Annual growth rate %&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">annual_growth_rate</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">general_information_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;GENERAL&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Document average age&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">document_average_age</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">general_information_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;GENERAL&quot;</span><span class="p">,</span>
            <span class="s2">&quot;References&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cited_references</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">general_information_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;GENERAL&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Average citations per document&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">average_citations_per_document</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">general_information_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;GENERAL&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Average citations per document per year&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">average_citations_per_document_per_year</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">general_information_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;GENERAL&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Average references per document&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">average_references_per_document</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">general_information_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;GENERAL&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Sources&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sources</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">general_information_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;GENERAL&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Average documents per source&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">average_documents_per_source</span><span class="p">(),</span>
        <span class="p">]</span>

    <span class="c1"># -----------------------------------------------------------------------------------</span>

    <span class="k">def</span> <span class="nf">compute_timespam</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">year</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">year</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">documents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">annual_growth_rate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">n_years</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">year</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">year</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">Po</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">year</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">year</span> <span class="o">==</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">year</span><span class="p">)])</span>
        <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n_records</span> <span class="o">/</span> <span class="n">Po</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">n_years</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">document_average_age</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mean_years</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">year</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">mean_years</span> <span class="o">=</span> <span class="n">mean_years</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        <span class="n">mean_years</span> <span class="o">=</span> <span class="n">mean_years</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
        <span class="n">current_year</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">year</span>
        <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">current_year</span><span class="p">)</span> <span class="o">-</span> <span class="n">mean_years</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cited_references</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;global_references&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">global_references</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">explode</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">NA</span>

    <span class="k">def</span> <span class="nf">average_citations_per_document</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;global_citations&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">global_citations</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">NA</span>

    <span class="k">def</span> <span class="nf">average_citations_per_document_per_year</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;global_citations&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">round</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">global_citations</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
                <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">year</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">year</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
                <span class="mi">2</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">NA</span>

    <span class="k">def</span> <span class="nf">average_references_per_document</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;global_references&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">num_references</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">global_references</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">num_references</span> <span class="o">=</span> <span class="n">num_references</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
            <span class="n">num_references</span> <span class="o">=</span> <span class="n">num_references</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
            <span class="n">num_references</span> <span class="o">=</span> <span class="n">num_references</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">len</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="n">num_references</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">NA</span>

    <span class="k">def</span> <span class="nf">sources</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;source_title&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">source_title</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">NA</span>

    <span class="k">def</span> <span class="nf">average_documents_per_source</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;source_title&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">sources</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">source_title</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">sources</span> <span class="o">=</span> <span class="n">sources</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
            <span class="n">n_records</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sources</span><span class="p">)</span>
            <span class="n">sources</span> <span class="o">=</span> <span class="n">sources</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
            <span class="n">n_sources</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sources</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="n">n_records</span> <span class="o">/</span> <span class="n">n_sources</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">NA</span>

    <span class="c1">#####################################################################################</span>
    <span class="k">def</span> <span class="nf">compute_document_types_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">document_types_stats</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Category&quot;</span><span class="p">,</span> <span class="s2">&quot;Item&quot;</span><span class="p">,</span> <span class="s2">&quot;Value&quot;</span><span class="p">])</span>
        <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="p">[[</span><span class="s2">&quot;document_type&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        <span class="n">document_types_count</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">records</span><span class="p">[[</span><span class="s2">&quot;document_type&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;document_type&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="p">(</span><span class="n">document_type</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
            <span class="nb">zip</span><span class="p">(</span><span class="n">document_types_count</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">document_types_count</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">document_types_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s2">&quot;DOCUMENT TYPES&quot;</span><span class="p">,</span>
                <span class="n">document_type</span><span class="p">,</span>
                <span class="n">count</span><span class="p">,</span>
            <span class="p">]</span>

    <span class="c1">#####################################################################################</span>
    <span class="k">def</span> <span class="nf">compute_authors_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authors_stats</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Category&quot;</span><span class="p">,</span> <span class="s2">&quot;Item&quot;</span><span class="p">,</span> <span class="s2">&quot;Value&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authors_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;AUTHORS&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Authors&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">authors</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authors_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;AUTHORS&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Authors of single-authored documents&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">authors_of_single_authored_documents</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authors_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;AUTHORS&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Single-authored documents&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">count_single_authored_documents</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authors_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;AUTHORS&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Multi-authored documents&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">count_multi_authored_documents</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authors_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;AUTHORS&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Authors per document&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">average_authors_per_document</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authors_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;AUTHORS&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Co-authors per document&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">co_authors_per_document</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authors_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;AUTHORS&quot;</span><span class="p">,</span>
            <span class="s2">&quot;International co-authorship %&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">international_co_authorship</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authors_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;AUTHORS&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Author appearances&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">author_appearances</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authors_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;AUTHORS&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Documents per author&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">average_documents_per_author</span><span class="p">(),</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">authors_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;AUTHORS&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Collaboration index&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">collaboration_index</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authors_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;AUTHORS&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Organizations&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">organizations</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authors_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;AUTHORS&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Organizations (1st author)&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">organizations_1st_author</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authors_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;AUTHORS&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Countries&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">countries</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authors_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;AUTHORS&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Countries (1st author)&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">countries_1st_author</span><span class="p">(),</span>
        <span class="p">]</span>

    <span class="c1"># -----------------------------------------------------------------------------------</span>

    <span class="k">def</span> <span class="nf">authors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">authors</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">explode</span><span class="p">()</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">authors_of_single_authored_documents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="p">[</span><span class="s2">&quot;num_authors&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">authors</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">authors</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        <span class="n">authors</span> <span class="o">=</span> <span class="n">authors</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">authors</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">count_single_authored_documents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="p">[</span><span class="s2">&quot;num_authors&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">count_multi_authored_documents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="p">[</span><span class="s2">&quot;num_authors&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">average_authors_per_document</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">num_authors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="p">[</span><span class="s2">&quot;num_authors&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="n">num_authors</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">co_authors_per_document</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">num_authors</span> <span class="o">=</span> <span class="n">records</span><span class="p">[</span><span class="n">records</span><span class="o">.</span><span class="n">num_authors</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">num_authors</span>
        <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="n">num_authors</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">international_co_authorship</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">countries</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">countries</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">countries</span> <span class="o">=</span> <span class="n">countries</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        <span class="n">countries</span> <span class="o">=</span> <span class="n">countries</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
        <span class="n">countries</span> <span class="o">=</span> <span class="n">countries</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">len</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">countries</span><span class="p">[</span><span class="n">countries</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">countries</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">author_appearances</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">authors</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">explode</span><span class="p">()</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">average_documents_per_author</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">authors</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        <span class="n">n_records</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">explode</span><span class="p">()</span>
        <span class="n">n_authors</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="n">n_records</span> <span class="o">/</span> <span class="n">n_authors</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">collaboration_index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="p">[[</span><span class="s2">&quot;authors&quot;</span><span class="p">,</span> <span class="s2">&quot;num_authors&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="p">[</span><span class="n">records</span><span class="o">.</span><span class="n">num_authors</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">n_records</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>

        <span class="n">n_authors</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">authors</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">n_authors</span> <span class="o">=</span> <span class="n">n_authors</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
        <span class="n">n_authors</span> <span class="o">=</span> <span class="n">n_authors</span><span class="o">.</span><span class="n">explode</span><span class="p">()</span>
        <span class="n">n_authors</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="n">n_authors</span> <span class="o">/</span> <span class="n">n_records</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">organizations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;organizations&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">organizations</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">explode</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">NA</span>

    <span class="k">def</span> <span class="nf">organizations_1st_author</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;organization_1st_author&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">organization_1st_author</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">explode</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">NA</span>

    <span class="k">def</span> <span class="nf">countries</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;countries&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">countries</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">explode</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">NA</span>

    <span class="k">def</span> <span class="nf">countries_1st_author</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;country_1st_author&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">country_1st_author</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">explode</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">NA</span>

    <span class="c1">#####################################################################################</span>
    <span class="k">def</span> <span class="nf">compute_keywords_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">keywords_stats</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Category&quot;</span><span class="p">,</span> <span class="s2">&quot;Item&quot;</span><span class="p">,</span> <span class="s2">&quot;Value&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">keywords_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;KEYWORDS&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Raw author keywords&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">raw_author_keywords</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">keywords_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;KEYWORDS&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Cleaned author keywords&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">author_keywords</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">keywords_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;KEYWORDS&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Raw index keywords&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">raw_index_keywords</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">keywords_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;KEYWORDS&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Cleaned index keywords&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">index_keywords</span><span class="p">(),</span>
        <span class="p">]</span>

    <span class="c1"># -----------------------------------------------------------------------------------</span>

    <span class="k">def</span> <span class="nf">raw_author_keywords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">raw_author_keywords</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">explode</span><span class="p">()</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">author_keywords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">author_keywords</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">explode</span><span class="p">()</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">raw_index_keywords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;raw_index_keywords&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">raw_index_keywords</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">explode</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">index_keywords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;index_keywords&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">index_keywords</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">explode</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>


<span class="kn">from</span> <span class="nn">plotly.subplots</span> <span class="kn">import</span> <span class="n">make_subplots</span>


<span class="k">def</span> <span class="nf">make_plot</span><span class="p">(</span><span class="n">report</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">add_text_trace</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">caption</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">):</span>
        <span class="n">text</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;&lt;span style=&quot;font-size: 8px;&quot;&gt;</span><span class="si">{</span><span class="n">caption</span><span class="si">}</span><span class="s1">&lt;/span&gt;&lt;br&gt;&#39;</span>
            <span class="sa">f</span><span class="s1">&#39;&lt;br&gt;&lt;span style=&quot;font-size: 20px;&quot;&gt;&#39;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">report</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">category</span><span class="p">,</span><span class="w"> </span><span class="n">caption</span><span class="p">)]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&lt;/span&gt;&quot;</span>
        <span class="p">)</span>

        <span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
            <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
                <span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">],</span>
                <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">],</span>
                <span class="n">text</span><span class="o">=</span><span class="p">[</span><span class="n">text</span><span class="p">],</span>
                <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="p">,</span>
            <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">update_xaxes</span><span class="p">(</span><span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">update_yaxes</span><span class="p">(</span><span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">make_subplots</span><span class="p">(</span><span class="n">rows</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

    <span class="n">add_text_trace</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="s2">&quot;GENERAL&quot;</span><span class="p">,</span> <span class="s2">&quot;Timespan&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">add_text_trace</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="s2">&quot;GENERAL&quot;</span><span class="p">,</span> <span class="s2">&quot;Sources&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">add_text_trace</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="s2">&quot;GENERAL&quot;</span><span class="p">,</span> <span class="s2">&quot;Documents&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

    <span class="n">add_text_trace</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="s2">&quot;GENERAL&quot;</span><span class="p">,</span> <span class="s2">&quot;Annual growth rate %&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">add_text_trace</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="s2">&quot;AUTHORS&quot;</span><span class="p">,</span> <span class="s2">&quot;Authors&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">add_text_trace</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="s2">&quot;AUTHORS&quot;</span><span class="p">,</span> <span class="s2">&quot;Authors of single-authored documents&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

    <span class="n">add_text_trace</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="s2">&quot;AUTHORS&quot;</span><span class="p">,</span> <span class="s2">&quot;International co-authorship %&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">add_text_trace</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="s2">&quot;AUTHORS&quot;</span><span class="p">,</span> <span class="s2">&quot;Co-authors per document&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">add_text_trace</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="s2">&quot;KEYWORDS&quot;</span><span class="p">,</span> <span class="s2">&quot;Raw author keywords&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

    <span class="n">add_text_trace</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="s2">&quot;GENERAL&quot;</span><span class="p">,</span> <span class="s2">&quot;References&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">add_text_trace</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="s2">&quot;GENERAL&quot;</span><span class="p">,</span> <span class="s2">&quot;Document average age&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">add_text_trace</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="s2">&quot;GENERAL&quot;</span><span class="p">,</span> <span class="s2">&quot;Average citations per document&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">showlegend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Main Information&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span>


<span class="k">def</span> <span class="nf">make_chatpgt_prompt</span><span class="p">(</span><span class="n">report</span><span class="p">):</span>
    <span class="n">report</span> <span class="o">=</span> <span class="n">report</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">Imagine that you are a researcher analyzing a bibliographic dataset. The table </span><span class="se">\</span>
<span class="s2">below provides data on the main characteristics of the dataset. Use the the </span><span class="se">\</span>
<span class="s2">information in the table to draw conclusions. Limit your description to one </span><span class="se">\</span>
<span class="s2">paragraph with no more than 250 words.</span>

<span class="si">{</span><span class="n">report</span><span class="o">.</span><span class="n">to_markdown</span><span class="p">()</span><span class="si">}</span>

<span class="s2">&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">prompt</span>


<span class="nd">@dataclass</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">_Results</span><span class="p">:</span>
    <span class="n">table_</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">plot_</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">prompt_</span> <span class="o">=</span> <span class="kc">None</span>


<div class="viewcode-block" id="main_information"><a class="viewcode-back" href="../../../../bibliometrix/overview/main_information.html#techminer2.bibliometrix.overview.main_information.main_information">[docs]</a><span class="k">def</span> <span class="nf">main_information</span><span class="p">(</span>
    <span class="n">directory</span><span class="o">=</span><span class="s2">&quot;./&quot;</span><span class="p">,</span>
    <span class="n">database</span><span class="o">=</span><span class="s2">&quot;documents&quot;</span><span class="p">,</span>
    <span class="n">start_year</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">end_year</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">filters</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns main statistics of the dataset.&quot;&quot;&quot;</span>

    <span class="n">obj</span> <span class="o">=</span> <span class="n">_MainInformation</span><span class="p">(</span>
        <span class="n">directory</span><span class="o">=</span><span class="n">directory</span><span class="p">,</span>
        <span class="n">database</span><span class="o">=</span><span class="n">database</span><span class="p">,</span>
        <span class="n">start_year</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span>
        <span class="n">end_year</span><span class="o">=</span><span class="n">end_year</span><span class="p">,</span>
        <span class="o">**</span><span class="n">filters</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">results</span> <span class="o">=</span> <span class="n">_Results</span><span class="p">()</span>
    <span class="n">results</span><span class="o">.</span><span class="n">table_</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">report_</span>
    <span class="n">results</span><span class="o">.</span><span class="n">plot_</span> <span class="o">=</span> <span class="n">make_plot</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">report_</span><span class="p">)</span>
    <span class="n">results</span><span class="o">.</span><span class="n">prompt_</span> <span class="o">=</span> <span class="n">make_chatpgt_prompt</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">report_</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">results</span></div>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>