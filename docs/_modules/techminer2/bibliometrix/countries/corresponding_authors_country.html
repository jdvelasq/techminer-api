<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>techminer2.bibliometrix.countries.corresponding_authors_country &mdash; TechMiner2 0.1.0 documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/copybutton.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/clipboard.min.js"></script>
        <script src="../../../../_static/copybutton.js"></script>
        <script src="../../../../_static/toggleprompt.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            TechMiner2
          </a>
              <div class="version">
                0.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction/release_info.html">Release Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction/license.html">MIT License</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software comparison</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../techminer/__index__.html">TechMiner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../bibliometrix/__index__.html">Bibliometrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../vantagepoint/__index__.html">VantagePoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tlab/__index__.html">T-LAB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../scientopy/__index__.html">ScientoPy</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">TechMiner2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">techminer2.bibliometrix.countries.corresponding_authors_country</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for techminer2.bibliometrix.countries.corresponding_authors_country</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Corresponding Author&#39;s Country</span>
<span class="sd">===============================================================================</span>



<span class="sd">&gt;&gt;&gt; directory = &quot;data/regtech/&quot;</span>
<span class="sd">&gt;&gt;&gt; file_name = &quot;sphinx/_static/bibliometrix__corresponding_authors_country.html&quot;</span>

<span class="sd">&gt;&gt;&gt; from techminer2 import bibliometrix</span>
<span class="sd">&gt;&gt;&gt; r = bibliometrix.countries.corresponding_authors_country(</span>
<span class="sd">...     topics_length=20,</span>
<span class="sd">...     directory=directory,</span>
<span class="sd">... )</span>
<span class="sd">&gt;&gt;&gt; r.plot_.write_html(file_name)</span>

<span class="sd">.. raw:: html</span>

<span class="sd">    &lt;iframe src=&quot;../../../_static/bibliometrix__corresponding_authors_country.html&quot;height=&quot;600px&quot; width=&quot;100%&quot; frameBorder=&quot;0&quot;&gt;&lt;/iframe&gt;</span>



<span class="sd">&gt;&gt;&gt; r.table_.head()</span>
<span class="sd">                single_publication  multiple_publication mcp_ratio</span>
<span class="sd">countries                                                         </span>
<span class="sd">United Kingdom                   4                     3      0.75</span>
<span class="sd">Australia                        4                     3      0.75</span>
<span class="sd">United States                    4                     2       0.5</span>
<span class="sd">Ireland                          4                     1      0.25</span>
<span class="sd">China                            2                     3       1.5</span>

<span class="sd">&gt;&gt;&gt; print(r.prompt_)</span>
<span class="sd">&lt;BLANKLINE&gt;</span>
<span class="sd">Imagine that you are a researcher analyzing a bibliographic dataset. The table below provides data on top 20 most frequent countries in the dataset. &#39;single publication&#39; is the number of documents in which all the authors are from the same country. &#39;multiple publication&#39; is the number of documents in which the authors are from different countries. &#39;mcp ratio&#39; is the ratio between &#39;multiple publication&#39; and &#39;single publication&#39;. The higher the ratio, the higher the collaboration between countries. Use the information in the table to draw conclusions about the level of collaboration between countries in the dataset. In your analysis, be sure to describe in a clear and concise way, any findings or any patterns you observe, and identify any outliers or anomalies in the data. Limit your description to one paragraph with no more than 250 words.</span>
<span class="sd">&lt;BLANKLINE&gt;</span>
<span class="sd">|    | countries            |   single_publication |   multiple_publication | mcp_ratio   |</span>
<span class="sd">|---:|:---------------------|---------------------:|-----------------------:|:------------|</span>
<span class="sd">|  0 | United Kingdom       |                    4 |                      3 | 0.75        |</span>
<span class="sd">|  1 | Australia            |                    4 |                      3 | 0.75        |</span>
<span class="sd">|  2 | United States        |                    4 |                      2 | 0.5         |</span>
<span class="sd">|  3 | Ireland              |                    4 |                      1 | 0.25        |</span>
<span class="sd">|  4 | China                |                    2 |                      3 | 1.5         |</span>
<span class="sd">|  5 | Italy                |                    4 |                      1 | 0.25        |</span>
<span class="sd">|  6 | Germany              |                    2 |                      2 | 1.0         |</span>
<span class="sd">|  7 | Switzerland          |                    1 |                      3 | 3.0         |</span>
<span class="sd">|  8 | Bahrain              |                    2 |                      2 | 1.0         |</span>
<span class="sd">|  9 | Hong Kong            |                    0 |                      3 | -           |</span>
<span class="sd">| 10 | Spain                |                    2 |                      0 | 0.0         |</span>
<span class="sd">| 11 | Indonesia            |                    2 |                      0 | 0.0         |</span>
<span class="sd">| 12 | Luxembourg           |                    1 |                      1 | 1.0         |</span>
<span class="sd">| 13 | United Arab Emirates |                    1 |                      1 | 1.0         |</span>
<span class="sd">| 14 | Palestine            |                    1 |                      0 | 0.0         |</span>
<span class="sd">| 15 | Romania              |                    0 |                      1 | -           |</span>
<span class="sd">| 16 | Poland               |                    0 |                      1 | -           |</span>
<span class="sd">| 17 | Netherlands          |                    0 |                      1 | -           |</span>
<span class="sd">| 18 | France               |                    0 |                      1 | -           |</span>
<span class="sd">| 19 | Belgium              |                    1 |                      0 | 0.0         |</span>
<span class="sd">&lt;BLANKLINE&gt;</span>
<span class="sd">&lt;BLANKLINE&gt;</span>
<span class="sd">&lt;BLANKLINE&gt;</span>


<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>

<span class="kn">from</span> <span class="nn">...techminer.indicators.collaboration_indicators_by_topic</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">collaboration_indicators_by_topic</span><span class="p">,</span>
<span class="p">)</span>


<span class="nd">@dataclass</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">_Results</span><span class="p">:</span>
    <span class="n">plot_</span><span class="p">:</span> <span class="kc">None</span>
    <span class="n">table_</span><span class="p">:</span> <span class="kc">None</span>
    <span class="n">prompt_</span><span class="p">:</span> <span class="kc">None</span>


<div class="viewcode-block" id="corresponding_authors_country"><a class="viewcode-back" href="../../../../bibliometrix/authors/countries/corresponding_authors_country.html#techminer2.bibliometrix.countries.corresponding_authors_country.corresponding_authors_country">[docs]</a><span class="k">def</span> <span class="nf">corresponding_authors_country</span><span class="p">(</span>
    <span class="n">topics_length</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
    <span class="n">topic_min_occ</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">topic_min_citations</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">directory</span><span class="o">=</span><span class="s2">&quot;./&quot;</span><span class="p">,</span>
    <span class="n">database</span><span class="o">=</span><span class="s2">&quot;documents&quot;</span><span class="p">,</span>
    <span class="n">start_year</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">end_year</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">filters</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Corresponding Author&#39;s Country&quot;&quot;&quot;</span>

    <span class="n">results</span> <span class="o">=</span> <span class="n">_Results</span><span class="p">()</span>
    <span class="n">table</span> <span class="o">=</span> <span class="n">_make_table</span><span class="p">(</span>
        <span class="n">directory</span><span class="o">=</span><span class="n">directory</span><span class="p">,</span>
        <span class="n">database</span><span class="o">=</span><span class="n">database</span><span class="p">,</span>
        <span class="n">start_year</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span>
        <span class="n">end_year</span><span class="o">=</span><span class="n">end_year</span><span class="p">,</span>
        <span class="o">**</span><span class="n">filters</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">topic_min_occ</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="n">table</span><span class="o">.</span><span class="n">OCC</span> <span class="o">&gt;=</span> <span class="n">topic_min_occ</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">topic_min_citations</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="n">table</span><span class="o">.</span><span class="n">global_citations</span> <span class="o">&gt;=</span> <span class="n">topic_min_citations</span><span class="p">]</span>
    <span class="n">table</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">topics_length</span><span class="p">)</span>

    <span class="n">results</span><span class="o">.</span><span class="n">table_</span> <span class="o">=</span> <span class="n">table</span>
    <span class="n">table</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
    <span class="n">results</span><span class="o">.</span><span class="n">plot_</span> <span class="o">=</span> <span class="n">_make_plot</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
    <span class="n">results</span><span class="o">.</span><span class="n">prompt_</span> <span class="o">=</span> <span class="n">_create_prompt</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">results</span></div>


<span class="k">def</span> <span class="nf">_create_prompt</span><span class="p">(</span><span class="n">table</span><span class="p">):</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">Imagine that you are a researcher analyzing a bibliographic dataset. The table </span><span class="se">\</span>
<span class="s2">below provides data on top </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> most frequent countries in the </span><span class="se">\</span>
<span class="s2">dataset. &#39;single publication&#39; is the number of documents in which all the </span><span class="se">\</span>
<span class="s2">authors are from the same country. &#39;multiple publication&#39; is the number </span><span class="se">\</span>
<span class="s2">of documents in which the authors are from different countries. </span><span class="se">\</span>
<span class="s2">&#39;mcp ratio&#39; is the ratio between &#39;multiple publication&#39; and &#39;single publication&#39;. </span><span class="se">\</span>
<span class="s2">The higher the ratio, the higher the collaboration between countries. </span><span class="se">\</span>
<span class="s2">Use the information in the table to draw conclusions about the level of </span><span class="se">\</span>
<span class="s2">collaboration between countries in the dataset. In your analysis, be sure to </span><span class="se">\</span>
<span class="s2">describe in a clear and concise way, any findings or any patterns you </span><span class="se">\</span>
<span class="s2">observe, and identify any outliers or anomalies in the data. </span><span class="se">\</span>
<span class="s2">Limit your description to one paragraph with no more than 250 words.</span>

<span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="n">to_markdown</span><span class="p">()</span><span class="si">}</span>


<span class="s2">&quot;&quot;&quot;</span>


<span class="k">def</span> <span class="nf">_make_table</span><span class="p">(</span>
    <span class="n">directory</span><span class="p">,</span>
    <span class="n">database</span><span class="p">,</span>
    <span class="n">start_year</span><span class="p">,</span>
    <span class="n">end_year</span><span class="p">,</span>
    <span class="o">**</span><span class="n">filters</span><span class="p">,</span>
<span class="p">):</span>
    <span class="n">indicators</span> <span class="o">=</span> <span class="n">collaboration_indicators_by_topic</span><span class="p">(</span>
        <span class="s2">&quot;countries&quot;</span><span class="p">,</span>
        <span class="n">directory</span><span class="o">=</span><span class="n">directory</span><span class="p">,</span>
        <span class="n">database</span><span class="o">=</span><span class="n">database</span><span class="p">,</span>
        <span class="n">start_year</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span>
        <span class="n">end_year</span><span class="o">=</span><span class="n">end_year</span><span class="p">,</span>
        <span class="o">**</span><span class="n">filters</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">indicators</span> <span class="o">=</span> <span class="n">indicators</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;OCC&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">indicators</span> <span class="o">=</span> <span class="n">indicators</span><span class="p">[[</span><span class="s2">&quot;single_publication&quot;</span><span class="p">,</span> <span class="s2">&quot;multiple_publication&quot;</span><span class="p">]]</span>
    <span class="n">indicators</span> <span class="o">=</span> <span class="n">indicators</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span>
        <span class="n">mcp_ratio</span><span class="o">=</span><span class="n">indicators</span><span class="p">[</span><span class="s2">&quot;multiple_publication&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">indicators</span><span class="p">[</span><span class="s2">&quot;single_publication&quot;</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="n">indicators</span> <span class="o">=</span> <span class="n">indicators</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">indicators</span>


<span class="k">def</span> <span class="nf">_make_plot</span><span class="p">(</span><span class="n">indicators</span><span class="p">):</span>
    <span class="n">indicators</span> <span class="o">=</span> <span class="n">indicators</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span>
        <span class="n">id_vars</span><span class="o">=</span><span class="s2">&quot;countries&quot;</span><span class="p">,</span> <span class="n">value_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;single_publication&quot;</span><span class="p">,</span> <span class="s2">&quot;multiple_publication&quot;</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="n">indicators</span> <span class="o">=</span> <span class="n">indicators</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span>
        <span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;variable&quot;</span><span class="p">:</span> <span class="s2">&quot;publication&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;Num Documents&quot;</span><span class="p">}</span>
    <span class="p">)</span>
    <span class="n">indicators</span><span class="o">.</span><span class="n">publication</span> <span class="o">=</span> <span class="n">indicators</span><span class="o">.</span><span class="n">publication</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">title</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="n">indicators</span><span class="o">.</span><span class="n">countries</span> <span class="o">=</span> <span class="n">indicators</span><span class="o">.</span><span class="n">countries</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">title</span><span class="p">())</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span>
        <span class="n">indicators</span><span class="p">,</span>
        <span class="n">x</span><span class="o">=</span><span class="s2">&quot;Num Documents&quot;</span><span class="p">,</span>
        <span class="n">y</span><span class="o">=</span><span class="s2">&quot;countries&quot;</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="s2">&quot;publication&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Corresponding Author&#39;s Country&quot;</span><span class="p">,</span>
        <span class="n">hover_data</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Num Documents&quot;</span><span class="p">],</span>
        <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;h&quot;</span><span class="p">,</span>
        <span class="n">color_discrete_map</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;Single Publication&quot;</span><span class="p">:</span> <span class="s2">&quot;#8da4b4&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Multiple Publication&quot;</span><span class="p">:</span> <span class="s2">&quot;#556f81&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">paper_bgcolor</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="n">plot_bgcolor</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">update_yaxes</span><span class="p">(</span>
        <span class="n">linecolor</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span>
        <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">autorange</span><span class="o">=</span><span class="s2">&quot;reversed&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">update_xaxes</span><span class="p">(</span>
        <span class="n">linecolor</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span>
        <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">gridcolor</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span>
        <span class="n">griddash</span><span class="o">=</span><span class="s2">&quot;dot&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>